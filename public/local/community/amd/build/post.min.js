define("local_community/post",["jquery"],(function($){return{init:function(postid){function loadPost(){fetch(M.cfg.wwwroot+"/local/community/ajax/get_post.php?id="+postid).then((res=>res.json())).then((function(data){let html="\n                        <h2>".concat(data.post.title,"</h2>\n                        <p>").concat(data.post.content,"</p>\n                        <hr>\n                        <h3>Answers</h3>\n                    ");data.answers.forEach((function(a){html+='\n                            <div class="answer">\n                                <p>'.concat(a.content,"</p>\n                                <small>").concat(a.firstname," ").concat(a.lastname,'</small>\n                                <button class="vote-answer" data-id="').concat(a.id,'" data-value="1">▲</button>\n                                <button class="vote-answer" data-id="').concat(a.id,'" data-value="-1">▼</button>\n                            </div>\n                        ')})),html+='\n                        <textarea id="answercontent"></textarea>\n                        <button id="addanswer">Add Answer</button>\n                    ',$("#post-app").html(html)}))}loadPost(),$(document).on("click","#addanswer",(function(){const content=$("#answercontent").val();fetch(M.cfg.wwwroot+"/local/community/ajax/create_answer.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postid:postid,content:content})}).then(loadPost)})),$(document).on("click",".vote-answer",(function(){fetch(M.cfg.wwwroot+"/local/community/ajax/vote.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answerid:$(this).data("id"),value:$(this).data("value")})})}))}}}));

//# sourceMappingURL=post.min.js.map